<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="icon" href="./../public/images/group.ico" >
    <link rel="stylesheet" href="cadastro/style.css" >

    <title>WhatChat - Cadastro</title>
  </head>
  <body>
    
    <header>
      <h2><a href="/" >WhatChat</a></h2>
    </header>

    <div class="page-wrapper">
      <div class="registration-page">
        <div class="logo-wrapper">
          <img src="/public/images/group.png" title="WhatChat Logo" >
        </div>
        
        <div class="form-area">
          <h3>Cadastro de Usuário</h3>
          <form action="/cadastro" id="form">
            <input id="name"          type="text"     placeholder="Nome do Usuário" name="nome" >
            <input id="email"         type="text"     placeholder="E-Mail do Usuário" name="email" >
            <input id="usertag"       type="text"     placeholder="Usertag" name="usertag">
            <input id="password"      type="password" placeholder="Senha" name="senha">
            <input id="signup-button" type="button" value="Cadastrar-se" >
          </form>
        </div>
      </div>
    </div>


    <script>
      let form = document.getElementById("form");

      let btn = document.getElementById("signup-button")
      btn.addEventListener("click", () => {

        fetch(form.action, {method:"post",body:new FormData(form)}).then(response => {
          if(response.ok) {
            alert("Cadastro realizado com sucesso");
            window.location.href = "/";
          } else {
            alert("Problema ao realizar o cadastro");
            document.location.reload();
          }
        });
      })

    </script>
  </body>
</html>